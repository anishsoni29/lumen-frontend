{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faVolumeUp,faStop}from'@fortawesome/free-solid-svg-icons';import'./styles/App.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[description,setDescription]=useState(\"\");const[isRecording,setIsRecording]=useState(false);const[userInput,setUserInput]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const[stream,setStream]=useState(null);// Camera stream state\nconst videoRef=useRef(null);// Video element for camera view\nuseEffect(()=>{return()=>{// Cleanup: Stop the camera stream when the component is unmounted\nif(stream){stream.getTracks().forEach(track=>track.stop());}};},[stream]);const handleCaptureAndDescribe=async transcript=>{setIsLoading(true);const response=await fetch(\"http://localhost:5001/generate-description\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user_input:transcript})});if(response.ok){const data=await response.json();setDescription(data.description);setUserInput(\"\");const speech=new SpeechSynthesisUtterance(data.description);speech.lang='en-US';window.speechSynthesis.speak(speech);}else{console.error('Error generating description:',response.statusText);}setIsLoading(false);};const toggleVoiceRecognition=()=>{if(!isRecording){startCamera();// Start the camera when voice recording begins\nstartRecognition();}else{stopCamera();// Stop the camera when voice recording stops\n}};const startRecognition=()=>{const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const recognition=new SpeechRecognition();recognition.onstart=()=>{setIsRecording(true);console.log('Voice recognition started. Try speaking into the microphone.');};recognition.onresult=event=>{const transcript=event.results[0][0].transcript;setUserInput(transcript);handleCaptureAndDescribe(transcript);};recognition.onerror=event=>{console.error('Error occurred in recognition: '+event.error);setIsRecording(false);};recognition.onend=()=>{setIsRecording(false);console.log('Voice recognition ended.');stopCamera();// Stop the camera when voice recognition ends\n};recognition.start();};const startCamera=async()=>{try{const mediaStream=await navigator.mediaDevices.getUserMedia({video:true});setStream(mediaStream);if(videoRef.current){videoRef.current.srcObject=mediaStream;}}catch(err){console.error('Error accessing camera:',err);}};const stopCamera=()=>{if(stream){stream.getTracks().forEach(track=>track.stop());// Stop all media tracks\nsetStream(null);// Clear the stream state\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"digital-font \",children:\"Lumen: Vision for All\"})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-card\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleVoiceRecognition,className:\"record-btn\",children:isRecording?/*#__PURE__*/_jsxs(_Fragment,{children:[\"Stop Recording \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faStop})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"Start Recording \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faVolumeUp})]})}),/*#__PURE__*/_jsx(\"textarea\",{className:\"input-area\",value:userInput,readOnly:true,placeholder:\"Your speech will appear here...\",rows:4})]}),/*#__PURE__*/_jsx(\"section\",{className:\"camera-section\",children:stream&&/*#__PURE__*/_jsx(\"div\",{className:\"camera-view\",children:/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,className:\"video-element\"})})}),/*#__PURE__*/_jsx(\"section\",{className:\"description-section\",children:isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Generating description...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"description-box\",children:/*#__PURE__*/_jsx(\"h2\",{children:description?`Description: ${description}`:\"No description yet.\"})})})]}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"designed with *Accessibility* in mind\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"we're open source. check us out on \",/*#__PURE__*/_jsx(\"a\",{href:\"https://github.com/anishsoni29/Lumen\",target:\"_blank\",children:\"github\"})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","FontAwesomeIcon","faVolumeUp","faStop","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","description","setDescription","isRecording","setIsRecording","userInput","setUserInput","isLoading","setIsLoading","stream","setStream","videoRef","getTracks","forEach","track","stop","handleCaptureAndDescribe","transcript","response","fetch","method","headers","body","JSON","stringify","user_input","ok","data","json","speech","SpeechSynthesisUtterance","lang","window","speechSynthesis","speak","console","error","statusText","toggleVoiceRecognition","startCamera","startRecognition","stopCamera","SpeechRecognition","webkitSpeechRecognition","recognition","onstart","log","onresult","event","results","onerror","onend","start","mediaStream","navigator","mediaDevices","getUserMedia","video","current","srcObject","err","className","children","onClick","icon","value","readOnly","placeholder","rows","ref","autoPlay","playsInline","href","target"],"sources":["/Users/anishsoni/Desktop/Lumen/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faVolumeUp, faStop } from '@fortawesome/free-solid-svg-icons'; \nimport './styles/App.css';\n\nfunction App() {\n  const [description, setDescription] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n  const [userInput, setUserInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false); \n  const [stream, setStream] = useState(null); // Camera stream state\n  const videoRef = useRef(null); // Video element for camera view\n\n  useEffect(() => {\n    return () => {\n      // Cleanup: Stop the camera stream when the component is unmounted\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [stream]);\n\n  const handleCaptureAndDescribe = async (transcript) => {\n    setIsLoading(true); \n    const response = await fetch(\"http://localhost:5001/generate-description\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ user_input: transcript }),\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      setDescription(data.description);\n      setUserInput(\"\"); \n\n      const speech = new SpeechSynthesisUtterance(data.description);\n      speech.lang = 'en-US'; \n      window.speechSynthesis.speak(speech); \n    } else {\n      console.error('Error generating description:', response.statusText);\n    }\n    setIsLoading(false); \n  };\n\n  const toggleVoiceRecognition = () => {\n    if (!isRecording) {\n      startCamera(); // Start the camera when voice recording begins\n      startRecognition();\n    } else {\n      stopCamera(); // Stop the camera when voice recording stops\n    }\n  };\n\n  const startRecognition = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    const recognition = new SpeechRecognition();\n\n    recognition.onstart = () => {\n      setIsRecording(true);\n      console.log('Voice recognition started. Try speaking into the microphone.');\n    };\n\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setUserInput(transcript); \n      handleCaptureAndDescribe(transcript);\n    };\n\n    recognition.onerror = (event) => {\n      console.error('Error occurred in recognition: ' + event.error);\n      setIsRecording(false);\n    };\n\n    recognition.onend = () => {\n      setIsRecording(false);\n      console.log('Voice recognition ended.');\n      stopCamera(); // Stop the camera when voice recognition ends\n    };\n\n    recognition.start();\n  };\n\n  const startCamera = async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({ video: true });\n      setStream(mediaStream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (err) {\n      console.error('Error accessing camera:', err);\n    }\n  };\n\n  const stopCamera = () => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop()); // Stop all media tracks\n      setStream(null); // Clear the stream state\n    }\n  }\n\n  return (\n    <div className=\"app-container\">\n      <header>\n      <h1 className=\"digital-font \">Lumen: Vision for All</h1>\n      </header>\n\n\n      <main>\n        <div className=\"input-card\">\n          <button onClick={toggleVoiceRecognition} className=\"record-btn\">\n            {isRecording ? (\n              <>\n                Stop Recording <FontAwesomeIcon icon={faStop} />\n              </>\n            ) : (\n              <>\n                Start Recording <FontAwesomeIcon icon={faVolumeUp} />\n              </>\n            )}\n          </button>\n          <textarea\n            className=\"input-area\"\n            value={userInput}\n            readOnly\n            placeholder=\"Your speech will appear here...\"\n            rows={4}\n          />\n        </div>\n\n        {/* Camera view section */}\n        <section className=\"camera-section\">\n          {stream && (\n            <div className=\"camera-view\">\n              <video ref={videoRef} autoPlay playsInline className=\"video-element\" />\n            </div>\n          )}\n        </section>\n\n        <section className=\"description-section\">\n          {isLoading ? (\n            <div className=\"loading-container\">\n              <div className=\"loader\"></div>\n              <p>Generating description...</p>\n            </div>\n          ) : (\n            <div className=\"description-box\">\n              <h2>{description ? `Description: ${description}` : \"No description yet.\"}</h2>\n            </div>\n          )}\n        </section>\n      </main>\n      <footer>\n        <p>designed with *Accessibility* in mind</p>\n        <p>we're open source. check us out on <a href=\"https://github.com/anishsoni29/Lumen\" target=\"_blank\">github</a></p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}